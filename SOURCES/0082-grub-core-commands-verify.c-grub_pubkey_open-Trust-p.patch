From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Vladimir Serbinenko <phcoder@gmail.com>
Date: Thu, 15 May 2014 14:36:48 +0200
Subject: [PATCH] * grub-core/commands/verify.c (grub_pubkey_open): Trust
 procfs.

---
 grub-core/commands/verify.c | 4 +++-
 ChangeLog                   | 4 ++++
 2 files changed, 7 insertions(+), 1 deletion(-)

diff --git a/grub-core/commands/verify.c b/grub-core/commands/verify.c
index 6349ccfbaea..525bdd18737 100644
--- a/grub-core/commands/verify.c
+++ b/grub-core/commands/verify.c
@@ -835,7 +835,9 @@ grub_pubkey_open (grub_file_t io, const char *filename)
 
   if (!sec)
     return io;
-  if (io->device->disk && io->device->disk->dev->id == GRUB_DISK_DEVICE_MEMDISK_ID)
+  if (io->device->disk && 
+      (io->device->disk->dev->id == GRUB_DISK_DEVICE_MEMDISK_ID
+       || io->device->disk->dev->id == GRUB_DISK_DEVICE_PROCFS_ID))
     return io;
   fsuf = grub_malloc (grub_strlen (filename) + sizeof (".sig"));
   if (!fsuf)
diff --git a/ChangeLog b/ChangeLog
index d0896d89e53..2a94ad979b3 100644
--- a/ChangeLog
+++ b/ChangeLog
@@ -1,3 +1,7 @@
+2014-06-21  Vladimir Serbinenko  <phcoder@gmail.com>
+
+	* grub-core/commands/verify.c (grub_pubkey_open): Trust procfs.
+
 2014-06-21  Vladimir Serbinenko  <phcoder@gmail.com>
 
 	* grub-core/commands/verify.c (grub_pubkey_open): Fix memdisk
